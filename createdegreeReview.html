<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Create Degree Review Article - East West University</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="categoryPages.css" />
    <link rel="stylesheet" href="CreateResearchArticle.css" />
    <link rel="stylesheet" href="majorEvents.css">
  </head>
  <body class="create-degree-review-page">
    <script>
      // Check if user is logged in
      if (!localStorage.getItem("isLoggedIn")) {
        window.location.href = "loginPage.html";
      }
    </script>
    <!-- Top Header Bar -->
    <header class="header">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-md-6">
            <div class="logo">
              <a href="homepage.html"><img
                src="Images/logo.png"
                alt="East West University"
                class="header-logo"/></a>
            </div>
          </div>
          <div class="col-md-6">
            <div class="header-right">
              <nav class="header-nav">
                <a href="homepage.html" class="nav-link">Home</a>
                <a href="#" class="nav-link notification-link">
                  Notification
                  <span class="notification-badge">2</span>
                </a>
                <a href="printPage.html" class="nav-link">Prints</a>
                <a href="vcNewsletter.html" class="nav-link">VC Newsletter</a>
                <div class="user-dropdown">
                  <a href="#" class="nav-link" id="userBtn">Profile</a>
                  <div class="dropdown-menu" id="dropdownMenu">
                    <a href="profile.html" class="dropdown-item">
                      <i class="bi bi-person"></i> View Profile
                    </a>
                    <a
                      href="loginPage.html"
                      class="dropdown-item"
                      id="logoutLink"
                    >
                      <i class="bi bi-box-arrow-right"></i> Logout
                    </a>
                  </div>
                </div>
              </nav>
              <div class="search-container">
                <i class="bi bi-search search-icon"></i>
                <input
                  type="text"
                  class="search-input"
                  placeholder="Search..."
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Page Title Bar - Top of page -->
    <div class="page-title-bar">
      <div class="container-fluid">
        <h1 class="page-title">Create Degree Review Article</h1>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-container">
     

      <!-- Back Button -->
      <button
        type="button"
        class="btn btn-secondary back-btn"
        onclick="window.location.href='degreeReview.html'"
      >
        <i class="bi bi-arrow-left-circle"></i>
      </button>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Form Container -->
        <div class="form-container">
          <form id="createDegreeReviewForm">
            <!-- Section 1: Degree Review Info -->
            <div class="form-section">
              <h2 class="section-title">Degree Review Info</h2>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="degreeProgramTitle" class="form-label"
                    >Degree Program Title *</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="degreeProgramTitle"
                    placeholder="e.g., BBA in Accounting, BSc in CSE"
                    required
                  />
                  <div class="form-text">
                    Enter the full title of the degree program being reviewed
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="department" class="form-label"
                    >Department *</label
                  >
                  <select class="form-select" id="department" required>
                    <option value="">Select department</option>
                    <option value="cse">CSE</option>
                    <option value="eee">EEE</option>
                    <option value="business">Business</option>
                    <option value="economics">Economics</option>
                    <option value="english">English</option>
                    <option value="law">Law</option>
                    <option value="sociology">Sociology</option>
                    <option value="pharmacy">Pharmacy</option>
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="reviewDates" class="form-label"
                    >Review Date(s) *</label
                  >
                  <input
                    type="date"
                    class="form-control"
                    id="reviewDates"
                    required
                  />
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="reviewSessionType" class="form-label"
                    >Review Session Type *</label
                  >
                  <select class="form-select" id="reviewSessionType" required>
                    <option value="">Select review session type</option>
                    <option value="internal">
                      Internal Departmental Review
                    </option>
                    <option value="faculty">Faculty Committee Review</option>
                    <option value="external">
                      External Accreditation Review (UGC/Accreditation Body)
                    </option>
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="committeeMembers" class="form-label"
                    >Committee / Panel Members</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="committeeMembers"
                    placeholder="Enter committee/panel members (comma separated)"
                  />
                  <div class="form-text">
                    List of faculty and external reviewers involved in the
                    review
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="organizers" class="form-label"
                    >Organizer(s)</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="organizers"
                    placeholder="Enter organizers (comma separated)"
                  />
                  <div class="form-text">
                    Department, Academic Council, UGC, External Body
                  </div>
                </div>
              </div>
            </div>

            <!-- Section 2: Article Content -->
            <div class="form-section">
              <h2 class="section-title">Article Content</h2>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="shortSummary" class="form-label"
                    >Short Summary *</label
                  >
                  <textarea
                    class="form-control"
                    id="shortSummary"
                    rows="3"
                    placeholder="Brief summary of the review (150-200 characters)"
                    maxlength="200"
                    required
                  ></textarea>
                  <div class="form-text">
                    A concise summary of the review process (150-200 characters)
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="fullArticle" class="form-label"
                    >Full Article *</label
                  >
                  <textarea
                    class="form-control"
                    id="fullArticle"
                    rows="8"
                    placeholder="Detailed explanation of the review process"
                    required
                  ></textarea>
                  <div class="form-text">
                    Detailed explanation of the review process
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="focusAreas" class="form-label"
                    >Key Focus Areas</label
                  >
                  <textarea
                    class="form-control"
                    id="focusAreas"
                    rows="4"
                    placeholder="curriculum, learning outcomes, industry alignment, resources"
                  ></textarea>
                  <div class="form-text">
                    Key focus areas of the review (curriculum, learning
                    outcomes, industry alignment, resources)
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="findings" class="form-label"
                    >Findings / Observations</label
                  >
                  <textarea
                    class="form-control"
                    id="findings"
                    rows="4"
                    placeholder="strengths, weaknesses"
                  ></textarea>
                  <div class="form-text">
                    Key findings and observations from the review (strengths,
                    weaknesses)
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="recommendations" class="form-label"
                    >Recommendations</label
                  >
                  <textarea
                    class="form-control"
                    id="recommendations"
                    rows="4"
                    placeholder="changes to curriculum, faculty development, facilities"
                  ></textarea>
                  <div class="form-text">
                    Recommendations from the review (changes to curriculum,
                    faculty development, facilities)
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="decisions" class="form-label"
                    >Decisions / Outcomes</label
                  >
                  <textarea
                    class="form-control"
                    id="decisions"
                    rows="4"
                    placeholder="approved changes, pending actions"
                  ></textarea>
                  <div class="form-text">
                    Decisions and outcomes from the review (approved changes,
                    pending actions)
                  </div>
                </div>
              </div>
            </div>

            <!-- Section 3: Media -->
            <div class="form-section">
              <h2 class="section-title">Media</h2>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="featuredImage" class="form-label"
                    >Featured Image</label
                  >
                  <input
                    type="file"
                    class="form-control"
                    id="featuredImage"
                    accept="image/*"
                  />
                  <div class="form-text">
                    Upload a photo from the review meeting
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="galleryUploads" class="form-label"
                    >Gallery Uploads</label
                  >
                  <input
                    type="file"
                    class="form-control"
                    id="galleryUploads"
                    multiple
                    accept="image/*"
                  />
                  <div class="form-text">
                    Upload committee photos and event session images
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="documents" class="form-label"
                    >Documents Upload</label
                  >
                  <input
                    type="file"
                    class="form-control"
                    id="documents"
                    multiple
                    accept=".pdf,.doc,.docx"
                  />
                  <div class="form-text">
                    Upload PDF documents (review report, agenda, curriculum
                    framework)
                  </div>
                </div>
              </div>
            </div>

            <!-- Section 4: Additional Info -->
            <div class="form-section">
              <h2 class="section-title">Additional Info</h2>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="tags" class="form-label">Tags / Keywords</label>
                  <input
                    type="text"
                    class="form-control"
                    id="tags"
                    placeholder="Enter tags/keywords (comma separated)"
                  />
                  <div class="form-text">
                    e.g., "Curriculum Review", "UGC", "Accreditation"
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12 mb-3">
                  <label class="form-label">Audience</label>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      value="students"
                      id="audienceStudents"
                    />
                    <label class="form-check-label" for="audienceStudents">
                      Students
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      value="faculty"
                      id="audienceFaculty"
                    />
                    <label class="form-check-label" for="audienceFaculty">
                      Faculty
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      value="admin"
                      id="audienceAdmin"
                    />
                    <label class="form-check-label" for="audienceAdmin">
                      Admin
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      value="ugc"
                      id="audienceUGC"
                    />
                    <label class="form-check-label" for="audienceUGC">
                      UGC
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="form-actions">
              <button type="button" class="btn btn-outline-primary draft-btn">
                <i class="bi bi-file-earmark-text"></i>
                Save as Draft
              </button>
              <button type="submit" class="btn btn-primary create-btn">
                <i class="bi bi-check-circle"></i>
                Submit for Review
              </button>
            </div>
          </form>
        </div>
      </main>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="profileDropdown.js"></script>
    <script src="majorEvents.js"></script>
    <script>
      // Handle form submission
      document
        .getElementById("createDegreeReviewForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          // Form submission logic would go here
          alert("Degree review article submitted for review!");
        });

      // Handle draft saving
      document
        .querySelector(".draft-btn")
        .addEventListener("click", function () {
          // Get form data
          const degreeProgramTitle =
            document.getElementById("degreeProgramTitle").value;
          const department = document.getElementById("department").value;
          const reviewDates = document.getElementById("reviewDates").value;
          const reviewSessionType =
            document.getElementById("reviewSessionType").value;
          const committeeMembers =
            document.getElementById("committeeMembers").value;
          const organizers = document.getElementById("organizers").value;
          const shortSummary = document.getElementById("shortSummary").value;
          const fullArticle = document.getElementById("fullArticle").value;
          const focusAreas = document.getElementById("focusAreas").value;
          const findings = document.getElementById("findings").value;
          const recommendations =
            document.getElementById("recommendations").value;
          const decisions = document.getElementById("decisions").value;
          const tags = document.getElementById("tags").value;

          // Get selected audience
          const audience = [];
          document
            .querySelectorAll('input[type="checkbox"]:checked')
            .forEach((checkbox) => {
              audience.push(checkbox.value);
            });

          // Create draft object
          const draft = {
            type: "degreeReview",
            degreeProgramTitle: degreeProgramTitle,
            department: department,
            reviewDates: reviewDates,
            reviewSessionType: reviewSessionType,
            committeeMembers: committeeMembers,
            organizers: organizers,
            shortSummary: shortSummary,
            fullArticle: fullArticle,
            focusAreas: focusAreas,
            findings: findings,
            recommendations: recommendations,
            decisions: decisions,
            tags: tags,
            audience: audience,
            date: new Date().toISOString(),
          };

          // Save draft to localStorage
          saveDraft(draft);

          // Show success message and redirect to drafts page
          alert("Degree review article saved as draft successfully!");
          window.location.href = "drafts.html";
        });

      // Function to save draft to localStorage
      function saveDraft(draft) {
        // Get existing drafts from localStorage
        const draftsJson = localStorage.getItem("drafts");
        const drafts = draftsJson ? JSON.parse(draftsJson) : [];

        // Check if we're editing an existing draft
        const currentDraftIndex = localStorage.getItem("currentDraftIndex");
        if (currentDraftIndex !== null) {
          // Update existing draft
          drafts[currentDraftIndex] = draft;
          localStorage.removeItem("currentDraftIndex");
          localStorage.removeItem("currentDraft");
        } else {
          // Add new draft
          drafts.push(draft);
        }

        // Save updated drafts to localStorage
        localStorage.setItem("drafts", JSON.stringify(drafts));
      }

      // Load draft data if editing
      loadDraftData();

      // Function to load draft data
      function loadDraftData() {
        const currentDraftJson = localStorage.getItem("currentDraft");
        if (currentDraftJson) {
          const draft = JSON.parse(currentDraftJson);

          // Fill form fields with draft data
          if (draft.degreeProgramTitle)
            document.getElementById("degreeProgramTitle").value =
              draft.degreeProgramTitle;
          if (draft.department)
            document.getElementById("department").value = draft.department;
          if (draft.reviewDates)
            document.getElementById("reviewDates").value = draft.reviewDates;
          if (draft.reviewSessionType)
            document.getElementById("reviewSessionType").value =
              draft.reviewSessionType;
          if (draft.committeeMembers)
            document.getElementById("committeeMembers").value =
              draft.committeeMembers;
          if (draft.organizers)
            document.getElementById("organizers").value = draft.organizers;
          if (draft.shortSummary)
            document.getElementById("shortSummary").value = draft.shortSummary;
          if (draft.fullArticle)
            document.getElementById("fullArticle").value = draft.fullArticle;
          if (draft.focusAreas)
            document.getElementById("focusAreas").value = draft.focusAreas;
          if (draft.findings)
            document.getElementById("findings").value = draft.findings;
          if (draft.recommendations)
            document.getElementById("recommendations").value =
              draft.recommendations;
          if (draft.decisions)
            document.getElementById("decisions").value = draft.decisions;
          if (draft.tags) document.getElementById("tags").value = draft.tags;

          // Set audience checkboxes
          if (draft.audience && Array.isArray(draft.audience)) {
            draft.audience.forEach((value) => {
              const checkbox = document.querySelector(
                `input[type="checkbox"][value="${value}"]`
              );
              if (checkbox) checkbox.checked = true;
            });
          }
        }
      }
    </script>
  </body>
</html>
